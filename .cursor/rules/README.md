# Cursor规则系统

本目录包含Cursor项目使用的自定义规则，用于指导智能体行为和确保项目质量。

## 规则列表

### 项目管理规则
- `code_confirmation.mdc`: 代码实施前确认规则，要求在实施代码修改前先提出明确方案并获得确认
- `large_scale_confirmation.mdc`: 防止大规模代码删除或修改，要求对大规模修改进行特别确认

### CrewAI规范规则
- `crewai_agent_roles.mdc`: CrewAI中不同角色智能体的标准定义规则
- `crewai_document_processing.mdc`: CrewAI文档处理能力的使用规范
- `crewai_latest_info.mdc`: 自动搜索CrewAI的最新文档和特性
- `crewai_tools_usage.mdc`: 关于CrewAI工具库的使用规范
- `crewai_workflow_design.mdc`: CrewAI工作流程设计的最佳实践

### 会话管理规则
- `session_init.mdc`: 新会话初始化规则，自动查找最新资料和上次会话总结
- `session_summary.mdc`: 会话总结与错误防范指南
- `summary_command.mdc`: 处理会话总结命令的规则

### 角色系统规则
- `role_manager.mdc`: 角色管理器，统一管理角色切换和互斥机制，确保同一时刻只有一个角色处于活跃状态
- `ar.mdc`: 架构师角色配置，负责技术架构设计和关键技术决策
- `co.mdc`: 项目教练角色配置，负责项目规划、进度把控和团队协调
- `dv.mdc`: 开发工程师角色配置，负责代码实现和技术方案设计
- `ex.mdc`: 探索者角色配置，负责探索、设计和完善多角色协作机制
- `pm.mdc`: 产品经理角色配置，负责需求分析、功能规划和用户体验设计
- `qa.mdc`: 测试工程师角色配置，负责测试用例设计和质量保证
- `sre.mdc`: 系统运维专家角色配置，专注于系统工具、终端命令和软件安装与故障排除
- `role_switch_example.mdc`: 角色切换示例

### 团队协作规则
- `team_collaboration.mdc`: 团队协作指南，定义角色间的协作机制和文档规范

### 系统维护规则
- `rules_evaluation.mdc`: 自动跟进评估规则有效性并持续优化
- `rule_conflict_detector.mdc`: 规则冲突检测器，自动分析规则间的冲突和重叠

## 规则系统特性

1. **自我维护**: 通过`rules_evaluation.mdc`和`rule_conflict_detector.mdc`实现规则系统的自我评估和优化
2. **角色管理**: 通过`role_manager.mdc`实现统一的角色管理和互斥机制，确保系统行为一致性
3. **角色专化**: 通过专门的角色定义规则实现多角色协作，每个角色都有明确的职责和专长
4. **知识更新**: 通过`crewai_latest_info.mdc`确保使用最新的技术信息
5. **会话连续性**: 通过`session_init.mdc`和`session_summary.mdc`实现会话间的连续性
6. **代码安全**: 通过确认机制防止意外的代码修改

## 使用方法

1. 所有规则文件应放置在`.cursor/rules/`目录中
2. 规则文件应使用`.mdc`扩展名
3. 每个规则文件应包含明确的标题、描述和具体执行规则
4. 每个规则文件应包含标准化的元数据头部，指定description、priority等属性

## 最佳实践

1. 保持规则简单明确，避免过于复杂的条件判断
2. 定期运行规则评估和冲突检测，确保规则系统的健康
3. 在添加新规则前，检查是否与现有规则存在冲突
4. 为每个规则添加清晰的示例和使用场景
5. 遵循规则命名约定，使用有意义的文件名
6. 使用refersTo属性明确规则间的依赖关系

## 角色切换命令

系统支持以下角色切换命令格式：

1. **显式切换命令**：
   - `/角色代号` - 例如：`/ar`、`/pm`、`/dv`
   - `/switch 角色代号` - 例如：`/switch ar`
   - `/切换 角色代号` - 例如：`/切换 ar`

2. **角色帮助命令**：
   - `/角色代号-help` - 例如：`/ar-help`
   - `/help 角色代号` - 例如：`/help ar`

## 角色列表

### 1. 探索者（Explorer）
- 职责：探索、设计和完善多角色协作机制
- 配置文件：`ex.mdc`
- 激活命令：`/ex`

### 2. 项目教练（Project Coach）
- 职责：项目规划、进度把控和团队协调
- 配置文件：`co.mdc`
- 激活命令：`/co`

### 3. 产品经理（Product Manager）
- 职责：需求分析、功能规划和用户体验
- 配置文件：`pm.mdc`
- 激活命令：`/pm`

### 4. 开发工程师（Developer）
- 职责：代码实现和技术方案
- 配置文件：`dv.mdc`
- 激活命令：`/dv`

### 5. 测试工程师（QA）
- 职责：测试用例设计和质量保证
- 配置文件：`qa.mdc`
- 激活命令：`/qa`

### 6. 架构师（Architect）
- 职责：技术架构设计和决策
- 配置文件：`ar.mdc`
- 激活命令：`/ar`

### 7. 系统运维专家（SRE）
- 职责：系统工具、终端命令和软件安装与故障排除
- 配置文件：`sre.mdc`
- 激活命令：`/sre`

## 使用说明

### 角色切换
- 使用 `/简称` 命令切换角色（例如：`/pm`、`/ex`、`/dv`）
- 角色切换后，AI助手将按照该角色的配置进行响应

### 角色协作
- 不同角色之间可以相互协作
- 可以通过 `@mention:角色名` 来请求其他角色的协助

### 配置文件结构
每个角色的配置文件包含以下部分：
1. 角色定义
2. 核心职责
3. 专业领域
4. 回答风格
5. 交互模式
6. 工作流程
7. 角色切换规则
8. 输出规范
9. 注意事项

## 开发计划
1. [x] 创建基础目录结构
2. [x] 创建探索者角色配置
3. [ ] 创建其他角色配置
4. [ ] 实现角色切换机制
5. [ ] 优化角色协作流程
6. [ ] 收集反馈并持续改进

## 贡献指南
欢迎参与多角色协作机制的开发和完善。如果您有新的想法或建议，请：
1. 提交 Issue 描述您的想法
2. 创建 Pull Request 提交您的改进
3. 参与讨论和反馈

## 更新日志
- 2024-03-13：创建基础框架和探索者角色配置 