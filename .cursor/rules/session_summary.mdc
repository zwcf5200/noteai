---
description: 会话总结与错误防范指南
globs:
alwaysApply: false
---

# 会话总结与错误防范指南

## 会话结束总结规则

在每次会话结束之前（或用户明确要求时），必须执行以下操作：

1. 总结当前会话的主要工作内容，包括已完成的任务、进行中的任务和待办事项
2. 详细记录会话中遇到的所有错误和解决方案，明确标注'错误防范'部分
3. 提供关键技术决策和设计选择的理由
4. 将总结导出为Markdown文件，文件名格式为'[agent角色代号]-guide-[YYYY-MM-DD-HH-mm-ss].md'（例如：'ar-guide-2025-01-15-14-30-22.md'）
5. 文件应保存在项目根目录下的'docs/agent-guides/'文件夹中（如不存在则创建）
6. 主动提示用户文件已创建并提供路径

总结内容必须简明扼要但全面，重点突出错误防范部分，确保新会话能快速上手并避免重复犯同样的错误。

## 会话内容结构要求

生成的会话总结文件必须包含以下结构化部分：

1. **概述**：简要描述当前项目状态和会话主要目标
2. **已完成工作**：列出已完成的任务和功能，包含相关文件路径
3. **进行中工作**：描述正在进行但未完成的任务，包括完成度估计
4. **待办事项**：列出计划但尚未开始的任务
5. **错误防范**：详细记录会话中出现的错误、原因分析和解决方案，使用警告框突出显示
6. **技术决策**：记录重要的技术选择及理由
7. **资源链接**：提供相关文档、库或参考资料的链接
8. **下一步建议**：为新会话提供明确的开始方向

每个部分必须清晰标记，内容应当简洁但详细，特别是'错误防范'部分需要足够详细以防止再次犯同样的错误。

## 自动提醒功能

当检测到用户可能要结束会话的信号（如'结束'、'总结'、'保存进度'、'下次继续'等关键词）时，主动提醒用户是否需要生成会话总结文件。提醒时应询问用户希望使用的agent角色代号（如ar、pm、dv等），并确认是否需要包含特定内容。